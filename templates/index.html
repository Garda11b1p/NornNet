{% extends 'base.html' %}

{% block title %}NornNet - Home{% endblock %}

{% block content %}
  <!-- Page container -->
  <div class="card" style="text-align:center; padding:20px;">
    <h1>NornNet</h1>
    <p>Welcome to NornNet - Where the Fates Weave Destiny with a Touch of AI Magic</p>

    <!-- Chat Interface -->
    <div id="chatbox" 
         style="border: 1px solid #ccc; background: white; padding: 10px; 
                width: 400px; height: 300px; overflow-y: auto; 
                margin: 20px auto; text-align: left;">
    </div>

    <!-- User Input and Button -->
    <div style="margin-top: 10px;">
      <input type="text" id="user_input" placeholder="Ask something..." 
             style="width: 300px; padding: 8px;">
      <button onclick="sendMessage()" style="padding: 8px 12 px; margin-left: 5px;">Send</button>
    </div>
  </div>

  <script>
    // PSEUDOCODE: AI Interaction Fflow

    /*
      Function sendMessage():
      1. Read user text input from the text field.
      2. If input is empty, exit the function.
      3. Append user's message to the chat display area.
      4. Send message to the Flask backend via a POST request to /chat.
      5. Wait for backend to process message and return AI-generated reply.
      6. Append the bot's reply below the user's message.
      7. Clear the input box and scroll chatbox to bottom.
    */


    // TODO: Implement additional features for future release once intital release in stable
    // - TODO: Add  typing indicator "Norn is thinking...."
    // - Add timestamp for each message
    // - Improve error handling if /chat endpoint fails

    /*
      async function sendMessage() {
        Step 1: Get user input
        Step 2: Skip if empty
        Step 3: Display user message
        Step 4: Send message to backend Flask API
        Step 5: Recieve AI reply from JSON
        // TODO: Handle cases where the backend returns an error
        Step 6: Display bot reply
        Step 7: Clear input and auto-scroll chat
      }
    */
  </script>

{% endblock %}